version: '3.8'

services:
  database:
      image: mongo:latest
      container_name: dabase_mongo_db
      restart: always
      ports:
         - 27017:27017
      environment:
         MONGO_INITDB_ROOT_USERNAME: root
         MONGO_INITDB_ROOT_PASSWORD: example
         MONGO_INITDB_DATABASE: mongo_db 
      volumes:
      - mgdata:/data/mongo


  aplication:
      image: python:3.8
      build: .
      container_name: python_app
      command: python src/main.py
      command: tail -f /dev/null
      ports: 
         - 5000:5000
      volumes:
         - .:/app
      links: 
         - database
      depends_on:
         - database
      

volumes:
  mgdata:
    driver: local